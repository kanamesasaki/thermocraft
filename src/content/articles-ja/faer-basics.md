---
title: 'Pure Rust ç·šå½¢ä»£æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªfaerå…¥é–€â‘  ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¨ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ '
description: 'faerã¯Pure Rustã§é«˜é€Ÿãªå¤§è¦æ¨¡è¡Œåˆ—è¨ˆç®—ã‚’å®Ÿç¾ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚è¡Œåˆ—(Mat)ãŠã‚ˆã³ãƒ“ãƒ¥ãƒ¼(MatRef)ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¨ã€ãƒ¡ãƒ¢ãƒªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ã®ä»•çµ„ã¿ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚'
pubDate: 2025-12-23
updatedDate: 2025-12-23
heroImage: ''
tags: ['programming', 'numerical analysis', 'mathematics']
---

<div style="background: linear-gradient(135deg, #8b0000 0%, #c41e3a 100%); padding: 0.5rem; border-radius: 8px; margin: 2rem 0;">
  <p style="color: white; margin: 0; text-align: left; font-size: 1.1rem;">
    ğŸ„ <a href="https://qiita.com/advent-calendar/2025/rust" style="color: white; text-decoration: underline; font-weight: bold;">Rust Advent Calendar 2025</a> 17æ—¥ç›® ğŸ„
  </p>
</div>

Rustã§ç§‘å­¦è¨ˆç®—ã€ç‰¹ã«ç·šå½¢ä»£æ•°ã®è¨ˆç®—ã‚’è¡Œã†å ´åˆã€ndarrayã‚„nalgebraã¨ã„ã£ãŸè¡Œåˆ—è¨ˆç®—ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ãŒã€æœ€è¿‘æ–°ãŸã«faerã¨ã„ã†ç·šå½¢ä»£æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæ³¨ç›®ã•ã‚Œå§‹ã‚ã¦ã„ã‚‹ã€‚ãã‚Œãã‚Œã®ç‰¹å¾´ã‚’ç°¡å˜ã«æ¯”è¼ƒã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚

- ndarray: Pythonã®NumPyã«è¿‘ã„æ±ç”¨çš„ãªå¤šæ¬¡å…ƒé…åˆ—ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚ãƒ‡ãƒ¼ã‚¿ã®ä¿æŒã‚„åŸºæœ¬æ“ä½œã¯Rustã®ã¿ã§å®Œçµã™ã‚‹ãŒã€é«˜é€Ÿãªè¡Œåˆ—ç©ã‚„é«˜åº¦ãªç·šå½¢ä»£æ•°æ¼”ç®—ã‚’è¡Œã†ã«ã¯ã€OpenBLASã‚„Intel MKLã¨ã„ã£ãŸå¤–éƒ¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
- nalgebra: ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚„ãƒ­ãƒœãƒ†ã‚£ã‚¯ã‚¹ã§é‡å®ã•ã‚Œã‚‹ã€Pure Rustã®ç·šå½¢ä»£æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã§è¡Œåˆ—ã‚µã‚¤ã‚ºã‚’å›ºå®šã§ãã‚‹ãŸã‚ã€å°è¦æ¨¡ãªè¡Œåˆ—è¨ˆç®—ã«ã¯æœ€é©ã ãŒã€å·¨å¤§ãªè¡Œåˆ—ã®è¨ˆç®—ã¯å¿…ãšã—ã‚‚å¾—æ„ã§ã¯ãªã„ã€‚
- faer: ä»Šå›ç´¹ä»‹ã™ã‚‹ã€å¤§è¦æ¨¡ãª2æ¬¡å…ƒè¡Œåˆ—è¨ˆç®—ã«ç‰¹åŒ–ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚Pure Rustã§ã‚ã‚ŠãªãŒã‚‰ã€SIMDæœ€é©åŒ–ã‚„ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã‚’æ´»ç”¨ã—ã¦é«˜é€Ÿãªè¡Œåˆ—æ¼”ç®—ã‚’å®Ÿç¾ã—ã€OpenBLASã‚„C++ã®Eigenã«åŒ¹æ•µã™ã‚‹é€Ÿåº¦ã‚’å©ãå‡ºã™ã‚‰ã—ã„ï¼ˆ[benchmarks | faer](https://faer.veganb.tw/benchmarks/)ï¼‰ã€‚

faerã¯å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã›ãšpure Rustã§å¤§è¦æ¨¡è¡Œåˆ—è¨ˆç®—ã‚’é«˜é€Ÿã«è¡Œãˆã‚‹ç‚¹ãŒæœ€å¤§ã®ç‰¹å¾´ã ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ç’°å¢ƒæ§‹ç¯‰ãŒå®¹æ˜“ã«ãªã‚Šã€Rustã‚‰ã—ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã‚‹ã“ã¨ãŒå¤§ããªé­…åŠ›ã¨ãªã£ã¦ã„ã‚‹ã€‚

## Installation

faerã¯Cargo.tomlã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚‹ã“ã¨ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã€‚
ä»Šå›ã¯ã€2025å¹´12æœˆæ™‚ç‚¹ã§ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚ã‚‹0.23.2ã‚’æŒ‡å®šã™ã‚‹ã€‚

```toml
[dependencies]
faer = "0.23.2"
```

## è¡Œåˆ—ï¼ˆMatï¼‰ã®ä½œæˆ

ã¾ãšã¯åŸºæœ¬çš„ãªè¡Œåˆ—ã®ä½œæˆæ–¹æ³•ã‚’è¦‹ã¦ã¿ã‚ˆã†ã€‚faerã§ã¯`Mat<T>`ã¨ã„ã†å‹ã§2æ¬¡å…ƒè¡Œåˆ—ã‚’è¡¨ç¾ã™ã‚‹ã€‚
ã‚¼ãƒ­è¡Œåˆ—ã€å˜ä½è¡Œåˆ—ã€å…¨è¦ç´ ãŒ1ã®è¡Œåˆ—ã€å®šæ•°è¡Œåˆ—ãªã©ã¯ã€ãã‚Œãã‚Œå°‚ç”¨ã®é–¢æ•°ã§ç°¡å˜ã«ç”Ÿæˆã§ãã‚‹ã€‚

```rust
use faer::Mat;
use faer::mat;

fn main() {
    // 1. ã‚¼ãƒ­è¡Œåˆ— (Zero Matrix)
    let zeros = Mat::<f64>::zeros(3, 3);
    println!("Zero Matrix:\n{:?}", zeros);
    // Zero Matrix (3, 3):
    // [
    // [0.0, 0.0, 0.0],
    // [0.0, 0.0, 0.0],
    // [0.0, 0.0, 0.0],
    // ]

    // 2. å˜ä½è¡Œåˆ— (Identity Matrix)
    let identity = Mat::<f64>::identity(3, 3);
    println!("Identity Matrix:\n{:?}", identity);
    // Identity Matrix (3, 3):
    // [
    // [1.0, 0.0, 0.0],
    // [0.0, 1.0, 0.0],
    // [0.0, 0.0, 1.0],
    // ]

    // 3. å…¨è¦ç´ ãŒ1ã®è¡Œåˆ— (Ones Matrix)
    let ones: Mat<f64> = Mat::<f64>::ones(3, 3);
    println!("Ones Matrix {:?}:\n{:?}", ones.shape(), ones);
    // Ones Matrix (3, 3):
    // [
    // [1.0, 1.0, 1.0],
    // [1.0, 1.0, 1.0],
    // [1.0, 1.0, 1.0],
    // ]

    // 4. å®šæ•°è¡Œåˆ— (Constant Matrix)
    let constants = Mat::<f64>::full(3, 3, 5.0);
    println!("Constant Matrix:\n{:?}", constants);
    // Constant Matrix (3, 3):
    // [
    // [5.0, 5.0, 5.0],
    // [5.0, 5.0, 5.0],
    // [5.0, 5.0, 5.0],
    // ]
}
```

Rustã®ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã‚„ãƒã‚¯ãƒ­ã‚’ä½¿ã†ã“ã¨ã§ã€ã‚ˆã‚ŠæŸ”è»Ÿã«è¡Œåˆ—ã‚’åˆæœŸåŒ–ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚
ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã‚’ä½¿ã†æ–¹æ³•ã§ã¯ã€è¡Œåˆ—ã®å„è¦ç´ ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«åŸºã¥ã„ã¦è¨ˆç®—ã§ãã‚‹ã€‚
å·¨å¤§ãªè¡Œåˆ—ã‚’ä½œæˆã™ã‚‹éš›ã‚‚ã€ä¸€æ™‚çš„ãªãƒ¡ãƒ¢ãƒªã‚’ä½¿ã‚ãšã«åŠ¹ç‡çš„ã«åˆæœŸåŒ–ã§ãã‚‹ã€‚

```rust
use faer::Mat;
use faer::mat;

fn main() {
    // 5. ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã«ã‚ˆã‚‹åˆæœŸåŒ– (Closure Initialization)
    let a = Mat::from_fn(3, 3, |i, j| (i * 10 + j) as f64);
    println!("Matrix A:\n{:?}", a);
    // Matrix A (3, 3):
    // [
    // [0.0, 1.0, 2.0],
    // [10.0, 11.0, 12.0],
    // [20.0, 21.0, 22.0],
    // ]

    // 6. ãƒã‚¯ãƒ­ã«ã‚ˆã‚‹åˆæœŸåŒ– (Macro Initialization)
    let b = mat![
        [1.0, 0.0, 0.0],
        [0.0, 2.0, 0.0],
        [0.0, 0.0, 3.0],
        [0.0, 8.0, 0.0],
    ];
    println!("Matrix B {:?}:\n{:?}", b.shape(), b);
    // Matrix B (4, 3):
    // [
    // [1.0, 0.0, 0.0],
    // [0.0, 2.0, 0.0],
    // [0.0, 0.0, 3.0],
    // [0.0, 8.0, 0.0],
    // ]
}
```

## faerã§ã®è¡Œåˆ—è¡¨ç¾

faerã«ãŠã„ã¦ã€ï¼’æ¬¡å…ƒè¡Œåˆ—ã®ãƒ‡ãƒ¼ã‚¿ãŒã©ã®ã‚ˆã†ã«è¡¨ç¾ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ã‚‚ã†å°‘ã—è©³ã—ãè¦‹ã¦ãŠã“ã†ã€‚
ã–ã£ãã‚Šã¨ã—ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦ã€ï¼’æ¬¡å…ƒè¡Œåˆ—ã®ãƒ‡ãƒ¼ã‚¿å‹ã¨ã—ã¦æœ€ä½é™å¿…è¦ãªæƒ…å ±ã¯ã€ä»¥ä¸‹ã®4ã¤ã§ã‚ã‚‹ã€‚

- è¡Œåˆ—è¦ç´ ã®ãƒ‡ãƒ¼ã‚¿ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ãƒ¡ãƒ¢ãƒªã®å…ˆé ­ã¸ã®ãƒã‚¤ãƒ³ã‚¿
- è¡Œæ•°
- åˆ—æ•°
- è¡Œåˆ—è¦ç´ ã®ãƒ‡ãƒ¼ã‚¿å‹

ã“ã‚Œã‚‰ã®æƒ…å ±ãŒã‚ã‚Œã°ã€ãƒ¡ãƒ¢ãƒªä¸Šã«ä¸¦ã‚“ã ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’è¡Œåˆ—è¦ç´ ã«å¯¾å¿œã•ã›ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚
faerã§ã¯ãŸã„ã¦ã„ã®å ´åˆã€è¡Œåˆ—ã¯`Mat<T>`ã¨ã„ã†å‹ã§è¡¨ã•ã‚Œã‚‹ãŒã€ã“ã‚Œã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ã«ãƒ©ãƒƒãƒ—ã•ã‚ŒãŸè¡¨ç¾ã§ã€ä¸­èº«ã‚’ç†è§£ã™ã‚‹ã«ã¯ã‚‚ã†å°‘ã—åŒ…ã¿ã‚’å‰¥ãŒã™å¿…è¦ãŒã‚ã‚‹ã€‚

faerã®å®Ÿè£…ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€`generic::Mat<Own<T, Rows, Cols>>`ã¨å®šç¾©ã•ã‚Œã¦ã„ã‚‹è¡Œåˆ—ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã€`Mat<T, Rows = usize, Cols = usize>`ã¨ã„ã†å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§åå‰ä»˜ã‘ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚
ã¨ãã«è¡Œæ•°ã¨åˆ—æ•°ã‚’å‹•çš„ã«`usize`ã¨ã—ã¦æ‰±ã†å ´åˆã€ãã‚Œã‚‰ã‚’çœç•¥ã—ã¦`Mat<T>`ã¨æ›¸ã‘ã‚‹ã€‚

```rust
pub type Mat<T, Rows = usize, Cols = usize> = generic::Mat<Own<T, Rows, Cols>>;
```

`Mat<T>`ã®ãƒ‡ãƒ¼ã‚¿å‹ã¨ã—ã¦ã®å®Ÿä½“ã¯`Own<T, Rows: Shape = usize, Cols: Shape = usize>`ã¨ã„ã†æ§‹é€ ä½“ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã€‚
`Rows`ã¨`Cols`ã¯è¡Œæ•°ã¨åˆ—æ•°ã‚’è¡¨ã™å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚ã‚Šã€faerã¯å¤§è¦æ¨¡ãªï¼’æ¬¡å…ƒè¡Œåˆ—ã‚’æ‰±ã†ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã‚‹ã®ã§ã€æ™®é€šã¯`usize`ã¨ã—ã¦å‹•çš„ã«æŒ‡å®šã™ã‚‹ã€‚
ãŸã ã—ã“ã‚Œã‚‰ãŒã€`Shape`ãƒˆãƒ¬ã‚¤ãƒˆã‚’æº€ãŸã™ã‚ˆã†ãªã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã¨ãªã£ã¦ã„ã‚‹ã®ã¯ã€å›ºå®šã‚µã‚¤ã‚ºã®è¡Œåˆ—ã‚’åŠ¹ç‡çš„ã«æ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚
`RawMat<T>`ã¯è¡Œåˆ—ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿã®ãƒ¡ãƒ¢ãƒªæƒ…å ±ã‚’ä¿æŒã™ã‚‹æ§‹é€ ä½“ã§ã‚ã‚Šã€å…ˆé ­ãƒã‚¤ãƒ³ã‚¿ã‚„ç¢ºä¿ã•ã‚ŒãŸãƒ¡ãƒ¢ãƒªå®¹é‡ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæƒ…å ±ãªã©ã‚’å«ã‚“ã§ã„ã‚‹ã€‚

```rust
pub struct Own<T, Rows: Shape = usize, Cols: Shape = usize> {
	raw: RawMat<T>,
	nrows: Rows,
	ncols: Cols,
}

struct RawMat<T> {
	ptr: NonNull<T>,
	row_capacity: usize,
	col_capacity: usize,
	layout: StackReq,
	__marker: PhantomData<T>,
}
```

ã•ã¦ã€ã“ã®ã‚ˆã†ãªè¡Œåˆ—`Mat<T>`ã®ãƒ‡ãƒ¼ã‚¿ã®ä¸­èº«ã¯ã€ãƒ’ãƒ¼ãƒ—ã«ç¢ºä¿ã•ã‚ŒãŸé€£ç¶šã—ãŸãƒ¡ãƒ¢ãƒªé ˜åŸŸã«æ ¼ç´ã•ã‚Œã¦ãŠã‚Šã€
faerã§ã¯Column-majorï¼ˆã¤ã¾ã‚Šã€åŒã˜åˆ—ã«å±ã™ã‚‹è¦ç´ ãŒãƒ¡ãƒ¢ãƒªä¸Šã§é€£ç¶šã—ãŸå½¢ï¼‰ã§é…ç½®ã•ã‚Œã¦ã„ã‚‹ã€‚
ãŸã ã—ã€SIMDæœ€é©åŒ–ã®ãŸã‚ã«ã€è¡Œæ•°ãŒSIMDå¹…ï¼ˆä¾‹ãˆã°64byte = f64ã®8å€‹åˆ†ï¼‰ã®å€æ•°ã«ãªã‚‹ã‚ˆã†ã«ç¢ºä¿ã™ã‚‹é ˜åŸŸãŒpaddingã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚
ã“ã®ã“ã¨ã¯ã€`unsafe`ã‚’åˆ©ç”¨ã—ã¦æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨ç¢ºèªã§ãã‚‹ã€‚
3Ã—2ã®è¡Œåˆ—ã‚’ä½œæˆã—ã€ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã¨ãƒã‚¤ãƒ³ã‚¿ã®æŒ‡ã™å€¤ã‚’é †ç•ªã«è¡¨ç¤ºã—ã¦ã¿ã‚‹ã¨ã€1åˆ—ç›®ã®è¦ç´ ãŒ3ã¤é€£ç¶šã—ã¦ãƒ¡ãƒ¢ãƒªä¸Šã«ä¸¦ã³ã€ãã®å¾Œ5ã¤åˆ†ã®paddingã‚’æŒŸã‚“ã å¾Œã€2åˆ—ç›®ã®è¦ç´ ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚

```rust
use faer::Mat;

fn main() {
    let mat: Mat<f64> = Mat::from_fn(3, 2, |i, j| ((i + 1) * 10 + (j + 1)) as f64);
    println!("--- Matrix Data {:?} ---\n{:?}", mat.shape(), mat);
    // --- Matrix Data (3, 2) ---
    // [
    // [11.0, 12.0],
    // [21.0, 22.0],
    // [31.0, 32.0],
    // ]

    println!("--- Sequential Data on Memory ---");
    let base_ptr = mat.as_ptr();
    let row_stride = mat.row_stride();
    let col_stride = mat.col_stride();
    let len = mat.ncols() * col_stride as usize;
    println!("Shape: {:?}, Row Stride: {}, Col Stride: {}", mat.shape(), row_stride, col_stride);

    unsafe {
        for offset in 0..len {
            let ptr = base_ptr.add(offset);
            println!("Offset +{}, {:?}: {:.1}", offset, ptr, *ptr);
        }
    }
    // --- Sequential Data on Memory ---
    // Shape: (3, 2), Row Stride: 1, Col Stride: 8
    // Offset +0, 0x562139354780: 11.0  <-- mat[0,0]
    // Offset +1, 0x562139354788: 21.0  <-- mat[1,0]
    // Offset +2, 0x562139354790: 31.0  <-- mat[2,0]
    // Offset +3, 0x562139354798: 0.0
    // Offset +4, 0x5621393547a0: 0.0
    // Offset +5, 0x5621393547a8: 0.0
    // Offset +6, 0x5621393547b0: 0.0
    // Offset +7, 0x5621393547b8: 0.0
    // Offset +8, 0x5621393547c0: 12.0  <-- mat[0,1]
    // Offset +9, 0x5621393547c8: 22.0  <-- mat[1,1]
    // Offset +10, 0x5621393547d0: 32.0 <-- mat[2,1]
    // Offset +11, 0x5621393547d8: 0.0
    // Offset +12, 0x5621393547e0: 0.0
    // Offset +13, 0x5621393547e8: 0.0
    // Offset +14, 0x5621393547f0: 0.0
    // Offset +15, 0x5621393547f8: 0.0
}
```

## MatRef<'a, T>

ã“ã“ã¾ã§è¦‹ã¦ããŸ`Mat<T>`ã¯ã€è¡Œåˆ—ãƒ‡ãƒ¼ã‚¿ã®æ‰€æœ‰æ¨©ã‚’æŒã¤å‹ã§ã‚ã‚‹ã€‚
ä¸€æ–¹ã§ã€è¡Œåˆ—ãƒ‡ãƒ¼ã‚¿ã®æ‰€æœ‰æ¨©ã‚’æŒãŸãšã€å‚ç…§ã¨ã—ã¦æŒ¯ã‚‹èˆã†å‹ã¨ã—ã¦`MatRef<'a, T>`ãŒã‚ã‚‹ã€‚
`MatRef<'a, T>`ã¯ã€å˜ãªã‚‹`Mat<T>`ã®å‚ç…§`&Mat<T>`ã¨ã„ã†ã ã‘ã§ãªãã€è¡Œåˆ—ãƒ‡ãƒ¼ã‚¿ã®ä¸€éƒ¨ã‚’å‚ç…§ã™ã‚‹ã‚¹ãƒ©ã‚¤ã‚¹ã¨ã—ã¦ã‚‚æ©Ÿèƒ½ã—ã€ã“ã‚Œã‚’ã†ã¾ãç”¨ã„ã‚‹ã¨ã€è»¢ç½®ã‚„ãƒ”ãƒœãƒƒãƒˆæ“ä½œã€éƒ¨åˆ†è¡Œåˆ—ã®æŠ½å‡ºãªã©ã‚’åŠ¹ç‡çš„ã«è¡Œã†ã“ã¨ãŒã§ãã‚‹ã€‚
ã“ã®ã‚ãŸã‚Šã®ä»•çµ„ã¿ã‚’æ„è­˜ã—ãªãŒã‚‰faerã‚’ä½¿ã†ã¨ã€ä¸ç”¨æ„ã«ãƒ¡ãƒ¢ãƒªã‚’ç¢ºä¿ã—ãŸã‚Šãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼ã—ãŸã‚Šã›ãšã«ã€åŠ¹ç‡çš„ãªè¡Œåˆ—è¨ˆç®—ãŒå¯èƒ½ã«ãªã‚‹ã€‚

### MatRefã®ä½¿ã„æ–¹

ã¾ãšã¯ã€MatRefã®ä½œæˆæ–¹æ³•ã‚’ç¢ºèªã—ã‚ˆã†ã€‚
è¡Œåˆ—å…¨ä½“ã®ãƒ“ãƒ¥ãƒ¼ã€ã‚ã‚‹ã„ã¯éƒ¨åˆ†è¡Œåˆ—ã®ãƒ“ãƒ¥ãƒ¼ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ä½œæˆã§ãã‚‹ã€‚
éƒ¨åˆ†è¡Œåˆ—ã‚’ä½œæˆã™ã‚‹å ´åˆã€è¡Œåˆ—ã®è¡Œæ•°ãƒ»åˆ—æ•°ã¯å¤‰åŒ–ã™ã‚‹ãŒã€è¡Œã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ãƒ»åˆ—ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã¯å¤‰åŒ–ã—ãªã„ã€‚

```rust
use faer::{Mat, MatRef};

fn main() {
    // 4x4 ã®è¡Œåˆ—ã‚’ä½œæˆ
    // (i, j) -> i * 10 + j
    let mat: Mat<f64> = Mat::from_fn(4, 4, |i, j| ((i + 1) * 10 + (j + 1)) as f64);
    println!("mat {:?}:\n{:?}", mat.shape(), mat);
    // mat (4, 4):
    // [
    // [11.0, 12.0, 13.0, 14.0],
    // [21.0, 22.0, 23.0, 24.0],
    // [31.0, 32.0, 33.0, 34.0],
    // [41.0, 42.0, 43.0, 44.0],
    // ]

    // è¡Œåˆ—å…¨ä½“ã®ãƒ“ãƒ¥ãƒ¼ã‚’å–å¾—
    let view: MatRef<f64> = mat.as_ref();
    println!("view {:?}:\n{:?}", view.shape(), view);
    // view (4, 4):
    // [
    // [11.0, 12.0, 13.0, 14.0],
    // [21.0, 22.0, 23.0, 24.0],
    // [31.0, 32.0, 33.0, 34.0],
    // [41.0, 42.0, 43.0, 44.0],
    // ]

    // éƒ¨åˆ†è¡Œåˆ—ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’å–å¾—
    let sub_matrix: MatRef<f64> = mat.as_ref().submatrix(1, 1, 2, 3);
    println!("sub_matrix {:?}:\n{:?}", sub_matrix.shape(), sub_matrix);
    // sub_matrix (2, 3):
    // [
    // [22.0, 23.0, 24.0],
    // [32.0, 33.0, 34.0],
    // ]

    // è¤‡æ•°è¡Œã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’å–å¾—
    let sub_rows: MatRef<f64> = mat.as_ref().subrows(1, 2);
    println!("sub_rows {:?}:\n{:?}", sub_rows.shape(), sub_rows);
    // sub_rows (2, 4):
    // [
    // [21.0, 22.0, 23.0, 24.0],
    // [31.0, 32.0, 33.0, 34.0],
    // ]

    // è¤‡æ•°åˆ—ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’å–å¾—
    let sub_cols: MatRef<f64> = mat.as_ref().subcols(0, 2);
    println!("sub_cols {:?}:\n{:?}", sub_cols.shape(), sub_cols);
    // sub_cols (4, 2):
    // [
    // [11.0, 12.0],
    // [21.0, 22.0],
    // [31.0, 32.0],
    // [41.0, 42.0],
    // ]
}
```

ä¸€æ–¹ã§ã€è¡Œã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ãƒ»åˆ—ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã€ãŠã‚ˆã³å…ˆé ­ãƒã‚¤ãƒ³ã‚¿ã‚’å¤‰åŒ–ã•ã›ã‚‹ã“ã¨ã§ã€ã„ãã¤ã‹ã®ä¾¿åˆ©ãªè¡Œåˆ—ã®ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã§ãã‚‹ã€‚
ä¾‹ãˆã°è»¢ç½®è¡Œåˆ—ã®å ´åˆã€å…ˆé ­ãƒã‚¤ãƒ³ã‚¿ã¯ãã®ã¾ã¾ã€è¡Œã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã¨åˆ—ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’å…¥ã‚Œæ›¿ãˆã‚‹ã“ã¨ã§å®Ÿç¾ã§ãã‚‹ã€‚
ã‚‚ã¨ã‚‚ã¨ã®è¡Œåˆ—ã§ã¯ã€è¡Œæ–¹å‘ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’1å¢—ã‚„ã™ã¨ãƒ¡ãƒ¢ãƒªä¸Šã§`f64`1ã¤åˆ†é€²ã¿ã€åˆ—æ–¹å‘ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’1å¢—ã‚„ã™ã¨`f64`8ã¤åˆ†é€²ã‚“ã§ã„ãŸã€‚
ã“ã‚Œã‚’è¡Œæ–¹å‘ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’1å¢—ã‚„ã™ã¨`f64`8ã¤åˆ†ï¼ˆå…ƒã®è¡Œåˆ—ã§åˆ—æ–¹å‘ã«1ã¤åˆ†ï¼‰é€²ã¿ã€åˆ—æ–¹å‘ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’1å¢—ã‚„ã™ã¨`f64`1ã¤åˆ†ï¼ˆå…ƒã®è¡Œåˆ—ã§è¡Œæ–¹å‘ã«1ã¤åˆ†ï¼‰é€²ã‚€ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ¡ãƒ¢ãƒªä¸Šã«ä¸¦ã¹ã‚‹ã“ã¨ãªãè»¢ç½®è¡Œåˆ—ã®æŒ¯ã‚‹èˆã„ã‚’å®Ÿç¾ã§ãã‚‹ã€‚
åŒæ§˜ã®è€ƒãˆæ–¹ã§ã€è¡Œåè»¢è¡Œåˆ—ã‚„åˆ—åè»¢è¡Œåˆ—ã®ãƒ“ãƒ¥ãƒ¼ã‚‚ä½œæˆã§ãã‚‹ã€‚

```rust
use faer::{Mat, MatRef};

fn main() {

    // 4x4 ã®è¡Œåˆ—ã‚’ä½œæˆ
    // (i, j) -> i * 10 + j
    let mat: Mat<f64> = Mat::from_fn(4, 4, |i, j| ((i + 1) * 10 + (j + 1)) as f64);
    println!("mat {:?}, row stride {:?}, col stride {:?}, ptr {:?}:\n{:?}", mat.shape(), mat.row_stride(), mat.col_stride(), mat.as_ptr(), mat);
    // mat (4, 4), row stride 1, col stride 8, ptr 0x556fd7e5ca00:
    // [
    // [11.0, 12.0, 13.0, 14.0],
    // [21.0, 22.0, 23.0, 24.0],
    // [31.0, 32.0, 33.0, 34.0],
    // [41.0, 42.0, 43.0, 44.0],
    // ]

    // è»¢ç½®è¡Œåˆ—ã®ãƒ“ãƒ¥ãƒ¼ã‚’å–å¾—
    let transpose: MatRef<f64> = mat.as_ref().transpose();
    println!("transpose {:?}, row stride {:?}, col stride {:?}, ptr {:?}:\n{:?}", transpose.shape(), transpose.row_stride(), transpose.col_stride(), transpose.as_ptr(), transpose);
    // transpose (4, 4), row stride 8, col stride 1, ptr 0x556fd7e5ca00:
    // [
    // [11.0, 21.0, 31.0, 41.0],
    // [12.0, 22.0, 32.0, 42.0],
    // [13.0, 23.0, 33.0, 43.0],
    // [14.0, 24.0, 34.0, 44.0],
    // ]

    // è¡Œåè»¢è¡Œåˆ—ã®ãƒ“ãƒ¥ãƒ¼ã‚’å–å¾—
    let reverse_row: MatRef<f64> = mat.as_ref().reverse_rows();
    println!("reverse_row {:?}, row stride {:?}, col stride {:?}, ptr {:?}:\n{:?}", reverse_row.shape(), reverse_row.row_stride(), reverse_row.col_stride(), reverse_row.as_ptr(), reverse_row);
    // reverse_row (4, 4), row stride -1, col stride 8, ptr 0x556fd7e5ca18:
    // [
    // [41.0, 42.0, 43.0, 44.0],
    // [31.0, 32.0, 33.0, 34.0],
    // [21.0, 22.0, 23.0, 24.0],
    // [11.0, 12.0, 13.0, 14.0],
    // ]

    // åˆ—åè»¢è¡Œåˆ—ã®ãƒ“ãƒ¥ãƒ¼ã‚’å–å¾—
    let reverse_col: MatRef<f64> = mat.as_ref().reverse_cols();
    println!("reverse_col {:?}, row stride {:?}, col stride {:?}, ptr {:?}:\n{:?}", reverse_col.shape(), reverse_col.row_stride(), reverse_col.col_stride(), reverse_col.as_ptr(), reverse_col);
    // reverse_col (4, 4), row stride 1, col stride -8, ptr 0x556fd7e5cac0:
    // [
    // [14.0, 13.0, 12.0, 11.0],
    // [24.0, 23.0, 22.0, 21.0],
    // [34.0, 33.0, 32.0, 31.0],
    // [44.0, 43.0, 42.0, 41.0],
    // ]
}
```

è¡Œãƒ™ã‚¯ãƒˆãƒ«ã€åˆ—ãƒ™ã‚¯ãƒˆãƒ«ã€å¯¾è§’è¡Œåˆ—ã®ãƒ“ãƒ¥ãƒ¼ã¯ãã‚Œãã‚Œå°‚ç”¨ã®å‹ãŒå­˜åœ¨ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ä½œæˆã§ãã‚‹ã€‚

```rust
use faer::diag::DiagRef;
use faer::{Mat, MatRef, RowRef, ColRef};

fn main() {
    // 4x4 ã®è¡Œåˆ—ã‚’ä½œæˆ
    // (i, j) -> i * 10 + j
    let mat: Mat<f64> = Mat::from_fn(4, 4, |i, j| ((i + 1) * 10 + (j + 1)) as f64);
    println!("mat {:?}:\n{:?}", mat.shape(), mat);
    // mat (4, 4):
    // [
    // [11.0, 12.0, 13.0, 14.0],
    // [21.0, 22.0, 23.0, 24.0],
    // [31.0, 32.0, 33.0, 34.0],
    // [41.0, 42.0, 43.0, 44.0],
    // ]

    // è¡Œãƒ™ã‚¯ãƒˆãƒ«ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’å–å¾—
    let row_vector: RowRef<f64> = mat.as_ref().row(2);
    println!("row_vector {:?}:\n{:?}", row_vector.shape(), row_vector);
    // row_vector (1, 4):
    // [31.0, 32.0, 33.0, 34.0]

    // åˆ—ãƒ™ã‚¯ãƒˆãƒ«ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’å–å¾—
    let col_vector: ColRef<f64> = mat.as_ref().col(3);
    println!("col_vector {:?}:\n{:?}", col_vector.shape(), col_vector);
    // col_vector (4, 1):
    // [14.0, 24.0, 34.0, 44.0]

    // å¯¾è§’æˆåˆ†ã®ãƒ“ãƒ¥ãƒ¼ã‚’å–å¾—
    let diagonal: DiagRef<f64> = mat.as_ref().diagonal();
    println!("diagonal {:?}:\n{:?}", diagonal.dim(), diagonal);
    // diagonal 4:
    // [11.0, 22.0, 33.0, 44.0]
}
```

### MatRefã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ 

è¡Œåˆ—ã®ãƒ“ãƒ¥ãƒ¼ã‚’Rustã‚’ç”¨ã„ã¦å®Ÿç¾ã™ã‚‹ã†ãˆã§é‡è¦ã¨ãªã‚‹ã®ã¯ã€ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ã‚’é©åˆ‡ã«ç®¡ç†ã™ã‚‹ã“ã¨ã§ã‚ã‚‹ã€‚
`MatRef<'a, T>`ã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ã¯å‚ç…§å…ˆã®`Mat<T>`ã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ã®ç¯„å›²å†…ã«åã¾ã£ã¦ãªã„ã¨ã„ã‘ãªã„ã€‚
ã“ã®ã“ã¨ã‚’ã€ã©ã®ã‚ˆã†ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ä¿è¨¼ã—ã¦ã„ã‚‹ã‹ã‚’è¦‹ã¦ã¿ã‚ˆã†ã€‚

ã¾ãšã€`MatRef<'a, T>`ã¯ã€`generic::Mat<Ref<'a, T, Rows, Cols, RStride, CStride>>`ã®å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ã€å®Ÿéš›ã®ä¸­èº«ã¯`Ref<'a, T, Rows, Cols, RStride, CStride>`ã¨ã„ã†æ§‹é€ ä½“ã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚

```rust
pub type MatRef<
	'a,
	T,
	Rows = usize,
	Cols = usize,
	RStride = isize,
	CStride = isize,
> = generic::Mat<Ref<'a, T, Rows, Cols, RStride, CStride>>;
```

è¡Œåˆ—ã®å‚ç…§ã‚’æ‰±ã†ä¸Šã§ã€æœ¬è³ªçš„ã«å¿…è¦ãªæƒ…å ±ã¯ã€ãƒ¡ãƒ¢ãƒªä¸Šã«ã‚ã‚‹è¡Œåˆ—ãƒ‡ãƒ¼ã‚¿ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã€è¡Œæ•°ã€åˆ—æ•°ã€è¡Œã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã€åˆ—ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã€ãƒ‡ãƒ¼ã‚¿å‹ã§ã‚ã‚‹ã€‚
ã“ã‚Œã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã¯`MatView`ã¨ã„ã†æ§‹é€ ä½“ã§ä¿æŒã•ã‚Œã€`Ref`ã®Publicãƒ¡ãƒ³ãƒã«ãªã£ã¦ã„ã‚‹ãŒã€`MatView`è‡ªä½“ã¯ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒãŸãªã„ã®ã§ã€ãƒã‚¤ãƒ³ã‚¿ã®å…ˆã®ãƒ‡ãƒ¼ã‚¿ãŒæœ‰åŠ¹ã‹ã©ã†ã‹ã¯ä¿è¨¼ã—ã¦ã„ãªã„ã€‚
`MatRef<'a, T>`ã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ã‚’ç¤ºã™ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿`'a`ã¯ã€`Ref`ã®ä¸­ã®`PhantomData<&'a T>`ã¨ã„ã†ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã«ãã£ã¤ã‘ã‚‰ã‚Œã¦ãŠã‚Šã€`Ref`å…¨ä½“ã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ãŒ`'a`ã«ä¾å­˜ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚

```rust
pub struct Ref<'a, T, Rows = usize, Cols = usize, RStride = isize, CStride = isize,> {
	pub(super) imp: MatView<T, Rows, Cols, RStride, CStride>,
	pub(super) __marker: PhantomData<&'a T>,
}

pub(crate) struct MatView<T: ?Sized, Rows, Cols, RStride, CStride> {
	ptr: NonNull<T>,
	nrows: Rows,
	ncols: Cols,
	row_stride: RStride,
	col_stride: CStride,
}
```

ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ `'a`ãŒã‚‚ã¨ã‚‚ã¨ã®ãƒ‡ãƒ¼ã‚¿`Mat<T>`ã®å‚ç…§ã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ãªã‚“ã ãã€ã¨ã„ã†ã“ã¨ã¯`mat.as_ref()`ã«ã‚ˆã£ã¦`MatRef<'a, T>`ã‚’ä½œæˆã™ã‚‹ã¨ãã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ä¼ãˆã¦ã„ã‚‹ã€‚
`as_ref()`ãƒ¡ã‚½ãƒƒãƒ‰ã¯`generic::Mat<Inner>`ã«å¯¾ã—ã¦å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€`Inner`ãŒ`Reborrow`ãƒˆãƒ¬ã‚¤ãƒˆã‚’æº€ãŸã™ã“ã¨ï¼ˆ`rb()`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã“ã¨ï¼‰ã‚’è¦æ±‚ã—ã¦ã„ã‚‹ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼çš„ã«ã¯`Mat`ã€`MatRef`ã€`MatMut`ãªã©æ§˜ã€…ãªå‹ã«å¯¾ã—ã¦`as_ref()`ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ãˆã‚‹ã“ã¨ã«ãªã‚‹ã®ã ãŒã€ç‰¹ã«é‡è¦ãªã®ã¯`Mat`ã«å¯¾ã™ã‚‹å®Ÿè£…ã§ã‚ã‚‹ã€‚

```rust
impl<
	T,
	Rows: Shape,
	Cols: Shape,
	RStride: Stride,
	CStride: Stride,
	Inner: for<'short> Reborrow<
			'short,
			Target = Ref<'short, T, Rows, Cols, RStride, CStride>,
		>,
> generic::Mat<Inner>
{
	/// returns a view over `self`
	#[inline]
	pub fn as_ref(&self) -> MatRef<'_, T, Rows, Cols, RStride, CStride> {
		self.rb()
	}
}

pub mod generic {
    pub struct Mat<Inner>(pub Inner);

    impl<'short, Inner: Reborrow<'short>> Reborrow<'short> for Mat<Inner> {
		type Target = Mat<Inner::Target>;

		#[inline(always)]
		fn rb(&'short self) -> Self::Target {
			Mat(self.0.rb())
		}
	}
}
```

`Mat`ã«å¯¾ã—ã¦`Reborrow`ãƒˆãƒ¬ã‚¤ãƒˆãŒã©ã®ã‚ˆã†ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’è¦‹ã¦ã¿ã‚ˆã†ã€‚
`rb()`ãƒ¡ã‚½ãƒƒãƒ‰ã¯`&self`ã‚’å—ã‘å–ã‚Šã€ã“ã®`&self`ã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ã‚’`'short`ã¨ã—ã¦ã€`Ref`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¦ã„ã‚‹ã€‚ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰å†…ã§ã¯æ˜ç¤ºçš„ã«æ›¸ã‹ã‚Œã¦ã„ãªã„ãŒã€`Ref`ã®ä¸­ã®`PhantomData<&'short T>`ã«ã‚ˆã£ã¦ã€`Ref`å…¨ä½“ã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ãŒ`'short`ã¨ãªã£ã¦ã„ã‚‹ã€‚
ã¤ã¾ã‚Šã€`Mat`ã®å‚ç…§`&Mat`ã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ã‚’ã€`PhantomData`ã«ãã£ã¤ã‘ã‚‹ã“ã¨ã§ã€è¿”å´ã•ã‚Œã‚‹`MatRef`ã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ãŒ`&Mat`ã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ã§ã‚ã‚‹ã€ã¨ã„ã†ã“ã¨ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ä¼ãˆã¦ã„ã‚‹ã®ã ã€‚

```rust
impl<'short, T, Rows: Shape, Cols: Shape> Reborrow<'short>
	for Own<T, Rows, Cols>
{
	type Target = Ref<'short, T, Rows, Cols>;

	#[inline]
	fn rb(&'short self) -> Self::Target {
		Ref {
			imp: MatView {
				ptr: self.raw.ptr,
				nrows: self.nrows,
				ncols: self.ncols,
				row_stride: 1,
				col_stride: self.raw.row_capacity as isize,
			},
			__marker: PhantomData,
		}
	}
}
```

## ã¾ã¨ã‚

ä»Šå›ã¯Rustã®ç·šå½¢ä»£æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªfaerã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã¨ã€è¡Œåˆ—ãƒ‡ãƒ¼ã‚¿ã®å†…éƒ¨è¡¨ç¾ã«ã¤ã„ã¦è§£èª¬ã—ãŸã€‚
ç‰¹ã«`MatRef`ã‚’ç”¨ã„ãŸè¡Œåˆ—ã®ãƒ“ãƒ¥ãƒ¼æ“ä½œã¯ã€åŠ¹ç‡çš„ãªè¡Œåˆ—æ“ä½œã‚’è¡Œã†ä¸Šã§é‡è¦ãªæ¦‚å¿µã§ã‚ã‚‹ã€‚
æ¬¡å›ã¯ã€faerã‚’ç”¨ã„ãŸåŸºæœ¬çš„ãªè¡Œåˆ—æ¼”ç®—ã®æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã™ã‚‹ã€‚

---
title: '浮動小数点数の誤差の追跡'
description: '浮動小数点数の丸め誤差が数値計算において重要な場合、誤差を推定・追跡する正しい方法とは何でしょうか？IEEE 754-2019の定義と誤差推定の基本的な方法論について見てみます。'
pubDate: 2025-05-18
updatedDate: 2025-05-19
heroImage: ''
tags: ['プログラミング', '数値解析']
---

## 浮動小数点形式

浮動小数点数の誤差についての議論を始める前に、まず浮動小数点数の形式について復習しましょう。
浮動小数点数には、二進浮動小数点と十進浮動小数点の 2 つのタイプがあります。
この記事では、コンピュータで実数を表現するために一般的に使用される二進浮動小数点に焦点を当てて議論します。

浮動小数点数の基本概念は以下のように説明できます：

- 符号ビット：1 ビットのデータで、値の正または負の符号を表す
- 指数ビット：$2^e$として 2 の累乗を表す
- 仮数ビット：$2^e$と$2^{e+1}$の間の範囲を等間隔に分割し、その間の実数を表現する

## IEEE 754 標準

IEEE 754 標準は、浮動小数点数演算の技術的詳細を定義する標準です。この標準では、単精度（32 ビット）と倍精度（64 ビット）の浮動小数点形式を定義しています。

### 単精度浮動小数点（32 ビット）

- 符号ビット：1 ビット
- 指数ビット：8 ビット
- 仮数ビット：23 ビット

### 倍精度浮動小数点（64 ビット）

- 符号ビット：1 ビット
- 指数ビット：11 ビット
- 仮数ビット：52 ビット

## 誤差の種類

浮動小数点演算では、主に以下の種類の誤差が発生します：

1. **丸め誤差**：有限精度のために発生する誤差
2. **打ち切り誤差**：計算手順の近似による誤差
3. **桁落ち**：近い値同士の減算で有効桁数が失われる現象

## 誤差の推定方法

数値計算において誤差を適切に追跡するためには、以下の方法を考慮する必要があります：

### 1. 機械イプシロン（Machine Epsilon）

機械イプシロンは、1.0 と次に大きい表現可能な浮動小数点数との差を表します：

```rust
fn machine_epsilon() -> f64 {
    let mut eps = 1.0;
    while 1.0 + eps != 1.0 {
        eps /= 2.0;
    }
    eps * 2.0
}
```

### 2. 相対誤差の追跡

計算の各ステップで相対誤差を追跡することで、累積誤差を監視できます：

$$\text{相対誤差} = \frac{|計算値 - 真値|}{|真値|}$$

### 3. 区間算術

区間算術を使用して、計算結果の上下限を追跡する方法もあります。

## まとめ

浮動小数点数の誤差は、数値計算において常に考慮すべき重要な要素です。適切な誤差推定と追跡により、計算結果の信頼性を評価できます。特に科学計算や工学計算では、これらの概念を理解することが不可欠です。
